{% extends "layout.html" %}

{% block fieldset %}
</br>
<fieldset>
    <legend id="legend">Visualization of the {{ scenario }} scenario</legend>
    <div id="mapid">
    <script src="sample-geojson.js" type="text/javascript"></script>
	<script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>
	<script>

		var mymap = L.map('mapid').setView([51.505, -0.09], 13);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(mymap);

        function onEachFeatureUbl(feature, layer) {
			var popupContent = "hello"
			layer.bindPopup(popupContent);
		};

		function onEachFeatureSpec(feature, layer) {
			var popupContent = "hey"
			layer.bindPopup(popupContent);
		};

        var popup = L.popup();

        function onMapclick(e) {
            popup
                .setLatLng(e.latlng)
                .setContent(e.latlng.toString() + '<br />Longitude : ' + {{ ubl[0][0] }} +
                 '<br />Latitude : ' + {{ ubl[0][1] }} + '<a href="/main"><h3>Home</h3></a>')
                .openOn(mymap)
        };

        mymap.on('click', onMapclick);

		var ublox = {
		    "type": "Feature",
		    "geometry": {
		        "type": "Point",
		        "coordinates": {{ ubl[0] }}
            }
        };

		var spectracom = {
		    "type": "Feature",
		    "geometry": {
		        "type": "LineString",
		        "coordinates": {{ spec }}
            }
        };

		L.geoJson(ublox, {style: {"color": "red"}, onMapclick}).addTo(mymap);


        L.geoJson(spectracom, {onEachFeature: onEachFeatureSpec}).addTo(mymap);

		mymap.fitBounds(L.geoJson(ublox).getBounds());


	</script>
    </div>
</fieldset>





{% endblock %}