{% extends "layout.html" %}

{% block fieldset %}
</br>
<fieldset>
    <legend id="legend">Visualization of the {{ scenario }} scenario</legend>
    <div id="mapid">
    <script src="sample-geojson.js" type="text/javascript"></script>
	<script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>
	<script>

		var mymap = L.map('mapid').setView([51.505, -0.09], 13);

		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(mymap);


		function more(i) {

            alert('time : '+i[2]);

            };

        {% set a=1 %}
        {% for i in ubl %}

		var ublox = {
		    "type": "Feature",
		    "geometry": {
		        "type": "Point",
		        "coordinates": [{{ i[0] }},{{ i[1] }}]
            }
        };



        L.geoJson(ublox, {style: {"color": "red"}, onEachFeature: function onEachFeatureUbl(feature, layer) {
			layer.bindPopup('Longitude : {{ i[0] }}<br />Latitude : {{ i[1] }}<br />Time (hhmmss.dd) : ' +
			 '{{ i[2] }}<br />Number : {{ a }}' + '<br /><br /><button onclick="more({{ ubl[a] }})">More</button>');
		}}).addTo(mymap);
        {% set a = a+1 %}
        {% endfor %}


        function onEachFeatureSpec(feature, layer) {
			var popupContent = "hey"
			layer.bindPopup(popupContent);
		};

		var spectracom = {
		    "type": "Feature",
		    "geometry": {
		        "type": "LineString",
		        "coordinates": {{ spec }}
            }
        };

        L.geoJson(spectracom, {onEachFeature: onEachFeatureSpec}).addTo(mymap);

		mymap.fitBounds(L.geoJson(spectracom).getBounds());


	</script>
    </div>
</fieldset>

<br /><br />
<fieldset>
	<legend id="legend">Details about trajctory</legend>

	<input type="button" class="button" onclick="rms1d()"  value="RMS1D">
    <input type="button" class="button" onclick="rms2d()"  value="RMS2D">
    <input type="button" class="button" onclick="rms3d()"  value="RMS3D">
	<br />
	<p id="detail"></p>

	<script>
		function rms1d() {
			var x = 'Root Mean Square error 1D in<br />Altitude : {{ computation[0] }}<br />Latitude : {{ computation[1] }}<br />Longitude :{{ computation[2] }}'
			document.getElementById("detail").innerHTML = x;
		}

		function rms2d() {
			var x = 'Root Mean Square error 2D : {{ computation[2] }}'
			document.getElementById("detail").innerHTML = x;
		}

		function rms3d() {
			var x = 'Root Mean Square error 3D : {{ computation[3] }}'
			document.getElementById("detail").innerHTML = x;
		}
	</script>

</fieldset>



{% endblock %}